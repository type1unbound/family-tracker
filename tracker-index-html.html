<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Family Routine & Values Tracker</title>
    
    <!-- CSS Files from GitHub -->
   <link rel="stylesheet" href="https://type1unbound.github.io/family-tracker/tracker-main-css.css">
    <link rel="stylesheet" href="https://type1unbound.github.io/family-tracker/tracker-modals-css.css">
    <link rel="stylesheet" href="https://type1unbound.github.io/family-tracker/tracker-responsive-css.css">
    <link rel="stylesheet" href="https://type1unbound.github.io/family-tracker/styles.css">
   
    <!-- Firebase SDKs -->
    <script src="https://www.gstatic.com/firebasejs/10.7.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.0/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.0/firebase-storage-compat.js"></script>

    <!-- JavaScript Modules from GitHub (order matters!) -->
    <script src="https://type1unbound.github.io/family-tracker/tracker-config-js.js"></script>
    <script src="https://type1unbound.github.io/family-tracker/tracker-state-js.js"></script>
    <script src="https://type1unbound.github.io/family-tracker/tracker-points-js.js"></script>
    <script src="https://type1unbound.github.io/family-tracker/tracker-schedule-js.js"></script>
    <script src="https://type1unbound.github.io/family-tracker/tracker-character-js.js"></script>
    <script src="https://type1unbound.github.io/family-tracker/tracker-templates.js"></script>
    <script src="https://type1unbound.github.io/family-tracker/tracker-module.js"></script>
    <script src="https://type1unbound.github.io/family-tracker/tracker-profile-js.js"></script>
    <script src="https://type1unbound.github.io/family-tracker/ui-core.js"></script>
    <script src="https://type1unbound.github.io/family-tracker/firebase.js"></script>
    <script src="https://type1unbound.github.io/family-tracker/main.js"></script>

<script>
    console.log('ProfileModule loaded?', !!window.ProfileModule);
    console.log('UICore loaded?', !!window.UICore);
    console.log('StateManager loaded?', !!window.StateManager);
    console.log('PointsModule loaded?', !!window.PointsModule);
</script>
    
</head>
<h1></h1>
<body>
    <!-- Login Overlay -->
    <div id="login-overlay" style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); display: flex; align-items: center; justify-content: center; z-index: 10000;">
        <div style="background: white; border-radius: 20px; padding: 40px; max-width: 400px; width: 90%; box-shadow: 0 20px 60px rgba(0,0,0,0.3); text-align: center;">
            <h1 style="font-size: 28px; margin-bottom: 8px; color: #1a202c;">Family Routine Tracker</h1>
            <p style="color: #6b7280; margin-bottom: 32px;">Track routines, earn points, grow together</p>
            
            <div id="login-content">
                <button id="google-signin-btn" style="width: 100%; padding: 14px 24px; background: white; border: 2px solid #e5e7eb; border-radius: 12px; font-size: 16px; font-weight: 600; color: #1a202c; cursor: pointer; display: flex; align-items: center; justify-content: center; gap: 12px; transition: all 0.2s;">
                    <svg width="20" height="20" viewBox="0 0 24 24">
                        <path fill="#4285F4" d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"/>
                        <path fill="#34A853" d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"/>
                        <path fill="#FBBC05" d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"/>
                        <path fill="#EA4335" d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"/>
                    </svg>
                    Sign in with Google
                </button>
                
                <div style="margin-top: 24px; font-size: 14px; color: #6b7280;">
                    <p>üîí Secure authentication</p>
                    <p style="margin-top: 8px;">‚òÅÔ∏è Your data syncs across devices</p>
                    <p style="margin-top: 8px;">üë®‚Äçüë©‚Äçüëß‚Äçüë¶ Share your family code to invite family to join</p>
                </div>
            </div>
            
            <div id="loading-content" style="display: none;">
                <div style="width: 50px; height: 50px; border: 4px solid #e5e7eb; border-top-color: #667eea; border-radius: 50%; animation: spin 1s linear infinite; margin: 0 auto;"></div>
                <p style="margin-top: 20px; color: #6b7280;">Loading your family data...</p>
            </div>
        </div>
    </div>

    <div class="container">
        <!-- Header -->
        <div class="card">
            <h1>Family Routine & Values Tracker</h1>
            <p class="subtitle">Building healthy habits and strong character together</p>
        </div>

        <!-- Dashboard Grid -->
        <div class="dashboard-grid">
            <!-- LEFT COLUMN -->
            <div class="left-column">
                <!-- Child Selector and Date -->
                <div class="grid grid-2">
                    <div class="card">
                        <label>Select Family Member</label>
                        <div id="child-buttons-container"></div>
                        <div style="text-align: center; margin-top: 12px;">
                            <button class="profile-edit-btn" onclick="ProfileModule.openProfileModal()">‚úèÔ∏è Edit Profile</button>
                            <button class="profile-edit-btn" onclick="ProfileModule.addNewChild()" style="margin-left: 8px; display: none;" id="add-child-btn">‚ûï Add Member</button>
                        </div>
                        <div id="tracker-buttons-container" style="text-align: center; margin-top: 8px;"></div>
                    </div>

                    <div class="card">
                        <label>Select Date</label>
                        <input type="date" id="date-picker" onchange="UICore.selectDate(this.value)">
                        <div id="date-display" style="margin-top: 12px; color: #4b5563; font-size: 14px;"></div>
                    </div>
                </div>

                <!-- Points Overview -->
                <div class="grid grid-4" style="margin-bottom: 20px;">
                    <div class="stat-card">
                        <div class="stat-label">Point Balance</div>
                        <div class="stat-value" id="base-points">0</div>
                        <div class="stat-sublabel" id="balance-sublabel"></div>
                        <button onclick="PointsModule.openSpendPointsModal()" style="margin-top: 12px; padding: 8px 16px; background: rgba(255,255,255,0.2); border: 1px solid rgba(255,255,255,0.4); border-radius: 8px; color: white; font-weight: 600; cursor: pointer; width: 100%; transition: all 0.2s;">üí∏ Spend Points</button>
                    </div>
                    <div class="stat-card">
                        <div class="stat-label">Growth Goal Bonus</div>
                        <div class="stat-value" id="multiplier">1.0x</div>
                        <div class="stat-sublabel" id="multiplier-label">Standard</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-label">Weekly Goals Bonus</div>
                        <div class="stat-value" id="chores-multiplier">1.0x</div>
                        <div class="stat-sublabel" id="chores-label">Complete all for 5x</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-label">Daily Total</div>
                        <div class="stat-value" id="total-points">0</div>
                        <div class="stat-sublabel" id="daily-goal-label">Goal: 0</div>
                    </div>
                </div>

                <!-- Weekly Total -->
                <div class="grid" style="grid-template-columns: 1fr; margin-bottom: 20px;">
                    <div class="stat-card">
                        <div class="stat-label">Weekly Total</div>
                        <div class="stat-value" id="weekly-points">0</div>
                        <div class="stat-sublabel" id="weekly-goal-label">Goal: 0</div>
                    </div>
                </div>
            </div>
            
            <!-- RIGHT COLUMN -->
            <div class="right-column">
                <!-- Progress Bars -->
                <div class="card">
                    <div class="progress-bar-container">
                        <div class="progress-header">
                            <span style="font-weight: 600; color: #374151;">Daily Progress</span>
                            <span id="daily-percent" style="color: #6b7280;">0%</span>
                        </div>
                        <div class="progress-bar">
                            <div class="progress-fill" id="daily-progress" style="width: 0%"></div>
                        </div>
                    </div>

                    <div class="progress-bar-container">
                        <div class="progress-header">
                            <span style="font-weight: 600; color: #374151;">Weekly Progress</span>
                            <span id="weekly-percent" style="color: #6b7280;">0%</span>
                        </div>
                        <div class="progress-bar">
                            <div class="progress-fill weekly" id="weekly-progress" style="width: 0%"></div>
                        </div>
                    </div>

                    <div id="streak-container"></div>
                </div>

                <!-- Schedule and Character sections -->
                <div class="schedule-character-row">
                    <div class="card">
                        <h2><span>üìÖ</span> Daily Routine & Expectations</h2>
                        <div class="schedule-list" id="schedule-list"></div>
                    </div>

                    <div>
                        <div class="card" style="margin-bottom: 20px;">
                            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px;">
                                <h2 style="margin: 0;"><span>üéØ</span> Weekly Goals</h2>
                                <div id="week-range" style="font-size: 13px; color: #6b7280; font-weight: 600;"></div>
                            </div>
                            <div style="font-size: 12px; color: #6b7280; margin-bottom: 12px; font-style: italic;">
                                ‚ÑπÔ∏è Goals reset each week (Monday-Sunday). Complete all to unlock 5x weekly bonus!
                            </div>
                            <div id="chores-completion-badge"></div>
                            <div id="weekly-chores-list"></div>
                        </div>

                        <div class="card">
                            <h2><span>‚≠ê</span> Personal Growth Areas</h2>
                            <div class="scrollable" id="character-sections"></div>
                        </div>

                        <div class="card">
                            <h2><span>üìù</span> Daily Notes & Reflection</h2>
                            <textarea id="daily-notes" rows="6" placeholder="General notes about the day, celebrations, challenges, or things to work on..." onchange="CharacterModule.updateNotes(this.value)"></textarea>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Edit Mode Toggle -->
    <button class="edit-mode-toggle" id="edit-mode-toggle" onclick="UICore.toggleEditMode()">
        <span id="edit-mode-text">‚úèÔ∏è Edit Mode</span>
    </button>
    
<!-- Modals container -->
<div id="modals-container">
    <!-- Profile Modal -->
    <div id="profile-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Edit Profile</h2>
                <button class="close-btn" onclick="ProfileModule.closeModal()">√ó</button>
            </div>
            <div class="modal-body">
                <div style="margin-bottom: 16px;">
                    <label>Name:</label>
                    <input type="text" id="modal-profile-name" class="edit-input" placeholder="Family member's name">
                </div>
                
                <div style="margin-bottom: 16px;">
                    <label>Profile Photo:</label>
                    <div id="upload-area" style="border: 2px dashed #d1d5db; border-radius: 8px; padding: 20px; text-align: center; cursor: pointer; margin-top: 8px;" onclick="document.getElementById('photo-upload').click()">
                        <div id="photo-preview-container">
                            <div style="font-size: 48px; margin-bottom: 8px;">üì∑</div>
                            <div style="color: #6b7280; font-size: 14px;">Click to upload photo</div>
                            <div style="color: #9ca3af; font-size: 12px; margin-top: 4px;">JPG, PNG or GIF</div>
                        </div>
                    </div>
                    <input type="file" id="photo-upload" accept="image/*" onchange="handlePhotoUpload(event)" style="display: none;">
                    <button id="remove-photo-btn" onclick="removePhoto()" style="margin-top: 8px; padding: 6px 12px; background: #ef4444; color: white; border: none; border-radius: 6px; cursor: pointer; display: none;">Remove Photo</button>
                    
                    <div id="crop-area" style="display: none; margin-top: 16px;">
                        <div id="crop-container" style="position: relative; max-width: 100%; margin: 0 auto;">
                            <img id="crop-image" style="max-width: 100%; display: block;">
                            <div id="crop-overlay" style="position: absolute; border: 2px solid #3b82f6; cursor: move;">
                                <div class="crop-handle nw" style="position: absolute; top: -5px; left: -5px; width: 10px; height: 10px; background: #3b82f6; cursor: nw-resize;"></div>
                                <div class="crop-handle ne" style="position: absolute; top: -5px; right: -5px; width: 10px; height: 10px; background: #3b82f6; cursor: ne-resize;"></div>
                                <div class="crop-handle sw" style="position: absolute; bottom: -5px; left: -5px; width: 10px; height: 10px; background: #3b82f6; cursor: sw-resize;"></div>
                                <div class="crop-handle se" style="position: absolute; bottom: -5px; right: -5px; width: 10px; height: 10px; background: #3b82f6; cursor: se-resize;"></div>
                            </div>
                        </div>
                        <div style="display: flex; gap: 8px; margin-top: 12px;">
                            <button onclick="applyCrop()" class="btn btn-primary">Apply Crop</button>
                            <button onclick="cancelCrop()" class="btn btn-secondary">Cancel</button>
                        </div>
                    </div>
                </div>
                
                <div style="margin-bottom: 16px;">
                    <label>Color Theme:</label>
                    <div id="color-palette-grid" style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 8px; margin-top: 8px;">
                        <!-- Color palette options will be rendered here by ProfileModule -->
                    </div>
                </div>
                
                <div style="margin-bottom: 16px;">
                    <label>Health Trackers:</label>
                    <div id="tracker-list-container" style="margin-top: 8px;">
                        <!-- Tracker list will be rendered here -->
                    </div>
<button onclick="TrackerTemplates.openAddTrackerModal()" style="margin-top: 8px; padding: 8px 16px; background: #6366f1; color: white; border: none; border-radius: 6px; cursor: pointer; width: 100%;">+ Add Health Tracker</button>
                </div>
            </div>
            <div class="modal-footer">
                <button id="delete-child-btn" onclick="ProfileModule.deleteCurrentChild()" class="btn" style="background: #ef4444; color: white; margin-right: auto;">Delete Profile</button>
                <button class="btn btn-secondary" onclick="ProfileModule.closeModal()">Cancel</button>
                <button class="btn btn-primary" onclick="saveProfile()">Save</button>
            </div>
        </div>
    </div>

    <!-- Schedule Modal -->
    <div id="schedule-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Edit Routine Item</h2>
                <button class="close-btn" onclick="closeModal()">√ó</button>
            </div>
            <div class="modal-body">
                <div style="margin-bottom: 12px;">
                    <label>Time:</label>
                    <input type="time" id="modal-time" class="edit-input">
                </div>
                <div style="margin-bottom: 12px;">
                    <label>Activity Name:</label>
                    <input type="text" id="modal-name" class="edit-input" placeholder="e.g., Morning Routine">
                </div>
                <div style="margin-bottom: 12px;">
                    <label>Days of Week:</label>
                    <div style="display: flex; gap: 8px; flex-wrap: wrap; margin-top: 8px;">
                        <label style="display: flex; align-items: center; gap: 4px;">
                            <input type="checkbox" id="day-sun" value="0"> Sun
                        </label>
                        <label style="display: flex; align-items: center; gap: 4px;">
                            <input type="checkbox" id="day-mon" value="1"> Mon
                        </label>
                        <label style="display: flex; align-items: center; gap: 4px;">
                            <input type="checkbox" id="day-tue" value="2"> Tue
                        </label>
                        <label style="display: flex; align-items: center; gap: 4px;">
                            <input type="checkbox" id="day-wed" value="3"> Wed
                        </label>
                        <label style="display: flex; align-items: center; gap: 4px;">
                            <input type="checkbox" id="day-thu" value="4"> Thu
                        </label>
                        <label style="display: flex; align-items: center; gap: 4px;">
                            <input type="checkbox" id="day-fri" value="5"> Fri
                        </label>
                        <label style="display: flex; align-items: center; gap: 4px;">
                            <input type="checkbox" id="day-sat" value="6"> Sat
                        </label>
                    </div>
                </div>
                <div style="margin-bottom: 12px;">
                    <label>Tasks/Expectations:</label>
                    <ul id="modal-tasks" style="list-style: none; padding: 0; margin-top: 8px;"></ul>
                    <button class="btn btn-secondary" onclick="addModalTask()" style="margin-top: 8px; width: 100%;">+ Add Task</button>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeModal()">Cancel</button>
                <button class="btn btn-primary" onclick="saveScheduleItem()">Save</button>
            </div>
        </div>
    </div>

    <!-- Character Category Modal -->
    <div id="character-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Edit Character Category</h2>
                <button class="close-btn" onclick="closeModal()">√ó</button>
            </div>
            <div class="modal-body">
                <div style="margin-bottom: 12px;">
                    <label>Category Name:</label>
                    <input type="text" id="modal-character-category" class="edit-input" placeholder="e.g., Respect">
                </div>
                <div style="margin-bottom: 12px;">
                    <label>Character Traits:</label>
                    <ul id="modal-character-items" style="list-style: none; padding: 0; margin-top: 8px;"></ul>
                    <button class="btn btn-secondary" onclick="addModalCharacterItem()" style="margin-top: 8px; width: 100%;">+ Add Trait</button>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeModal()">Cancel</button>
                <button class="btn btn-primary" onclick="saveCharacterCategory()">Save</button>
            </div>
        </div>
    </div>

    <!-- Chore/Goal Modal -->
    <div id="chore-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Edit Weekly Goal</h2>
                <button class="close-btn" onclick="closeModal()">√ó</button>
            </div>
            <div class="modal-body">
                <div style="margin-bottom: 12px;">
                    <label>Goal Name:</label>
                    <input type="text" id="modal-chore-name" class="edit-input" placeholder="e.g., Clean bedroom">
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeModal()">Cancel</button>
                <button class="btn btn-primary" onclick="saveChore()">Save</button>
            </div>
        </div>
    </div>

    <!-- Spend Points Modal -->
    <div id="spend-points-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Spend Points</h2>
                <button class="close-btn" onclick="closeModal()">√ó</button>
            </div>
            <div class="modal-body">
                <div style="margin-bottom: 16px; text-align: center;">
                    <div style="font-size: 14px; color: #6b7280; margin-bottom: 8px;">Current Balance</div>
                    <div style="font-size: 36px; font-weight: bold; color: #6366f1;" id="spend-modal-balance">0</div>
                </div>
                <div style="margin-bottom: 12px;">
                    <label>Amount to Spend:</label>
                    <input type="number" id="modal-spend-amount" class="edit-input" placeholder="Enter points amount" min="1">
                </div>
                <div style="margin-bottom: 12px;">
                    <label>Reason (Optional):</label>
                    <input type="text" id="modal-spend-reason" class="edit-input" placeholder="e.g., Bought a toy">
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeModal()">Cancel</button>
                <button class="btn btn-primary" onclick="spendPoints()">Spend Points</button>
            </div>
        </div>
    </div>

    <!-- Delete Confirmation Modal -->
    <div id="delete-confirm-modal" class="modal">
        <div class="modal-content" style="max-width: 400px;">
            <div class="modal-header">
                <h2>‚ö†Ô∏è Confirm Delete</h2>
                <button class="close-btn" onclick="closeDeleteConfirm()">√ó</button>
            </div>
            <div class="modal-body">
                <p id="delete-child-name" style="font-size: 16px; margin-bottom: 16px;"></p>
                <p style="color: #ef4444; font-weight: 600;">This action cannot be undone!</p>
                <p style="color: #6b7280; font-size: 14px;">All data for this family member will be permanently deleted.</p>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeDeleteConfirm()">Cancel</button>
                <button class="btn" style="background: #ef4444; color: white;" onclick="confirmDeleteChild()">Delete Forever</button>
            </div>
        </div>
    </div>

    <!-- Delete Goal Confirmation Modal -->
    <div id="delete-goal-confirm-modal" class="modal">
        <div class="modal-content" style="max-width: 400px;">
            <div class="modal-header">
                <h2>‚ö†Ô∏è Confirm Delete</h2>
                <button class="close-btn" onclick="closeDeleteGoalConfirm()">√ó</button>
            </div>
            <div class="modal-body">
                <p id="delete-goal-name" style="font-size: 16px; margin-bottom: 16px;"></p>
                <p style="color: #6b7280; font-size: 14px;">This goal will be removed from the weekly goals list.</p>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeDeleteGoalConfirm()">Cancel</button>
                <button class="btn" style="background: #ef4444; color: white;" onclick="confirmDeleteGoal()">Delete Goal</button>
            </div>
        </div>
    </div>

    <!-- Medication/Health Tracker Modal -->
    <div id="med-tracker-modal" class="modal">
        <div class="modal-content" style="max-width: 900px;">
            <div class="modal-header">
                <h2 id="med-tracker-member-name">Health Tracker</h2>
                <button class="close-btn" onclick="closeMedicationTracker()">√ó</button>
            </div>
            
            <!-- Tabs (MUST come before content) -->
            <div style="display: flex; gap: 8px; border-bottom: 2px solid #e5e7eb; margin-bottom: 20px;">
                <button id="med-tab-entry" onclick="switchMedTab('entry')" style="padding: 12px 24px; border: none; background: none; cursor: pointer; border-bottom: 2px solid #6366f1; color: #6366f1; font-weight: 600;">Entry</button>
                <button id="med-tab-history" onclick="switchMedTab('history')" style="padding: 12px 24px; border: none; background: none; cursor: pointer; border-bottom: 2px solid transparent; color: #6b7280; font-weight: 600;">History</button>
                <button id="med-tab-analytics" onclick="switchMedTab('analytics')" style="padding: 12px 24px; border: none; background: none; cursor: pointer; border-bottom: 2px solid transparent; color: #6b7280; font-weight: 600;">Analytics</button>
                <button id="med-tab-settings" onclick="switchMedTab('settings')" style="padding: 12px 24px; border: none; background: none; cursor: pointer; border-bottom: 2px solid transparent; color: #6b7280; font-weight: 600;">Settings</button>
            </div>
            
            <!-- Tab Contents -->
            <div id="med-content-entry">
                <div style="margin-bottom: 16px;">
                    <label>Date:</label>
                    <input type="date" id="med-entry-date" class="edit-input">
                </div>
                <div style="margin-bottom: 16px;">
                    <label>Observer Name:</label>
                    <input type="text" id="med-observer" class="edit-input" placeholder="Who is filling this out?">
                </div>
                <div id="med-period-types-container" style="margin-bottom: 16px;"></div>
                <div id="med-rating-categories"></div>
                <div style="margin-top: 20px; margin-bottom: 16px;">
                    <label>Notes (optional):</label>
                    <textarea id="med-entry-notes" class="edit-input" rows="4" placeholder="Any additional observations or notes..."></textarea>
                </div>
                <button onclick="saveMedEntry()" class="btn btn-primary" style="width: 100%; margin-top: 20px;">Save Entry</button>
            </div>
            
            <div id="med-content-history" style="display: none;">
                <div id="med-history-list"></div>
            </div>
            
            <div id="med-content-analytics" style="display: none;">
                <div id="med-analytics-content"></div>
            </div>
            
            <div id="med-content-settings" style="display: none;">
                <div id="med-settings-content"></div>
            </div>
        </div>
    </div>
</div>

<script>
    console.log('ProfileModule loaded?', !!window.ProfileModule);
    console.log('UICore loaded?', !!window.UICore);
    console.log('StateManager loaded?', !!window.StateManager);
    console.log('PointsModule loaded?', !!window.PointsModule);
    
    // Debug code for photo tracking
    setTimeout(() => {
        if (window.StateManager && StateManager.state.data) {
            const currentChild = StateManager.getCurrentChild();
            console.log('üñºÔ∏è Current child photo:', currentChild.photo ? 'EXISTS' : 'MISSING');
            if (currentChild.photo) {
                console.log('üìè Photo data length:', currentChild.photo.length);
                console.log('üî§ Photo starts with:', currentChild.photo.substring(0, 50));
            }
        }
    }, 5000);
</script>

</body>
</html>
